<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>360 viewer</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="image-wrapper" id="image-wrapper1">
      <div
        class="cloudimage-360"
        id="car-image"
        data-folder="./images/black/"
        data-filename-x="{index}.jpg"
        data-amount-x="3"
        data-test="subaru"
        hide-360-logo
      ></div>
    </div>

    <div class="controls">
      <div class="rotate-image">
        <img src="./images/360.png" alt="360 degrees" />
      </div>

      <p class="model-colour">
        Model Colour: <span id="active-model">Black</span>
      </p>

      <div class="buttons">
        <button class="toggle-button graphite" onclick="toggleImageWrapper('./images/black/', this)" value="Graphite">1</button>
        <button class="toggle-button black" onclick="toggleImageWrapper('./images/black/', this)" value="Black">2</button>
        <button class="toggle-button grey1" onclick="toggleImageWrapper('./images/black/', this)" value="Grey 1">3</button>
        <button class="toggle-button grey2" onclick="toggleImageWrapper('./images/blue/', this)" value="Grey 2">4</button>
        <button class="toggle-button red" onclick="toggleImageWrapper('./images/red/', this)" value="Red 1">5</button>
        <button class="toggle-button blue1" onclick="toggleImageWrapper('./images/blue/', this)" value="Blue 1">6</button>
        <button class="toggle-button orange" onclick="toggleImageWrapper('./images/red/', this)" value="Orange">7</button>
        <button class="toggle-button red2" onclick="toggleImageWrapper('./images/red/', this)" value="Red 2">8</button>
        <button class="toggle-button blue2" onclick="toggleImageWrapper('./images/blue/', this)" value="Blue 2">9</button>
      </div>
    </div>

    <script src="https://cdn.scaleflex.it/plugins/js-cloudimage-360-view/latest/js-cloudimage-360-view.min.js"></script>
    <script>
      function toggleImageWrapper(wrapperId, button) {
        var container = document.getElementById("car-image");
        container.setAttribute("data-folder", wrapperId);
        window.CI360.update("car-image", true);
        console.log(wrapperId);

        // Remove active class from all buttons
        var buttons = document.querySelectorAll(".toggle-button");
        buttons.forEach(function (btn) {
          btn.classList.remove("active");
        });

        // Add active class to the clicked button
        button.classList.add("active");

        // Get the value of the clicked button
        var buttonValue = button.value;

        // Update the model color text
        var activeModelSpan = document.getElementById("active-model");
        activeModelSpan.textContent = buttonValue;
      }
    </script>
  </body>
</html>
